{% extends 'base.html' %}
{% load static %}
{% block content %}
<h1>Journal</h1>
<!-- EXPERIMENT -->
<div class="row">
    <!-- Area Chart -->
    <div class="col-xl-8 col-lg-7">
        <div class="card shadow mb-4">
            <!-- Card Header - Dropdown -->
            <div
                class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-primary">Add Food</h6>
                <div class="dropdown no-arrow">
                    <form action="{% url 'journal' %}" method='POST'>
                        {% csrf_token %}
                        <div class='form-group'>
                            <div class='row'>
                                <div class='col-5'>
                                    <label for='date_food' class='form-label mt-2'>
                                        Date
                                    </label>
                                    <input
                                        class='form-control'
                                        type='date'
                                        name='date' 
                                        id='date'
                                    >
                                </div>
                                <div class='col-5'>
                                    <label for='weight' class='form-label mt-2'>
                                        Weight in kg
                                    </label>
                                    <input 
                                        class='form-control'
                                        type='number' 
                                        name='weight'
                                        id='weight'
                                        placeholder='0.00' required name='weight' 
                                        min='0' 
                                        value='0' 
                                        step='1' 
                                        title='Weight' 
                                        pattern='^\d*(\.\d{0,2})?$'
                                    >
                                </div>
                                <div class='col-2'>
                                    <button type='submit' class='btn btn-primary' style='margin-top:40px;'>
                                        Add
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                    
                </div>
            </div>
        </div>
    </div>
    <div class='col-md-6 mt-4'>
        <div class='card bg-secondary mb-3'>
            <div class='card-header'>
                <h4>Weight History</h4>
            </div>
            <div class='card-body justify-content-center'>
                <!-- EXPERIMENT! -->
                <div>

    
                    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous"> -->
                    <!-- Chartjs CDN -->
                    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
                
                    <div class = "container">
                        {% load crispy_forms_tags %}                            
                    <div class = "row mt-3 pt-3">
                        <div class = "col-md-4">
                            <div class = "border p-3 shadow">
                                <h4>Add Data</h4>
                                <hr>
                                <form method="POST">
                                    {% csrf_token %}
                                    {{ form|crispy }}
                                    <input class = 'btn btn-success btn-block' type='submit' value = 'Add'>
                                </form>
                            </div>
                            <!-- labels: [{% for data in data %} '{{data.movie}}', {% endfor %}], -->
                            <!-- data: [{% for data in data %} {{data.domesticBoxOffice}}, {% endfor %}], -->

                        </div>
                        <div class = "col-md-8">
                            <canvas id="myChart" width="400" height="400"></canvas>
                            <script>
                            const ctx = document.getElementById('myChart').getContext('2d');
                            const myChart = new Chart(ctx, {
                                type: 'bar',
                                data: {
                                    labels: ['Protein', 'Fat', 'Calcium', 'Potassium', 'Phosphorus', 'Sodium'],
                                    datasets: [{
                                        label: '# of Votes',
                                        data: [12, 19, 3, 5, 2, 3],
                                        backgroundColor: [
                                            'rgba(255, 99, 132, 0.2)',
                                            'rgba(54, 162, 235, 0.2)',
                                            'rgba(255, 206, 86, 0.2)',
                                            'rgba(75, 192, 192, 0.2)',
                                            'rgba(153, 102, 255, 0.2)',
                                            'rgba(255, 159, 64, 0.2)'
                                        ],
                                        borderColor: [
                                            'rgba(255, 99, 132, 1)',
                                            'rgba(54, 162, 235, 1)',
                                            'rgba(255, 206, 86, 1)',
                                            'rgba(75, 192, 192, 1)',
                                            'rgba(153, 102, 255, 1)',
                                            'rgba(255, 159, 64, 1)'
                                        ],
                                        borderWidth: 1
                                    }]
                                },
                                options: {
                                    scales: {
                                        y: {
                                            beginAtZero: true
                                        }
                                    }
                                }
                            });
                            </script>
                        </div>

                    </div>
                    </div>
                    <!-- Optional JavaScript; choose one of the two! -->
                    
                    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
                    <!-- <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script> -->
                    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script> -->
                    
                    <!-- Option 2: Separate Popper and Bootstrap JS -->
                    <!--
                    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
                    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
                    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
                    -->

                </div>
            </div>
        </div>
    </div>
</div>

<div class='card bg-secondary mb-3'>
    <div class='card-header'>
        <h4>Weight Log</h4>
    </div>
    <div class='card-body'>

        <table id='weightable' class='table'>
            <thead>
                <tr>
                    <th scope='col' class='col-md-4'>Weight in kg</th>
                    <th scope='col' class='col-md-4'>Date</th>
                    <th scope='col' class='col-md-4'></th>
                </tr>
            </thead>
            <tbody>
                {% for weight_record in user_weight_log %}
                    <tr>
                        <td class='col-md-4'>{{ weight_record.weight }}</td>
                        <td class='col-md-4'>{{ weight_record.entry_date|date:'Y-m-d' }}</td>
                        <td class='col-md-4'>
                            <a class='btn btn-success' href="#" style='margin-right:2px;'>
                            <i class='fas fa-edit'></i>
                        </a>
                        <a class='btn btn-danger' href="{% url 'journal' %}"> -->
                        <!-- href="{% url 'weight_log_delete' weight_record.id %}"> -->
                            <i class='fas fa-trash-alt'></i>
                        </a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>
</div>

</div>

<!-- EXPERIMENT END -->

{% endblock %}